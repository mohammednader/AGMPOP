#pragma checksum "E:\TFS\POPAGM\AGMPOP_Core\AGMPOP.Web\Views\Inventory\_ProductTransaction.cshtml" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "966f6fee55977bd6e0f14dfa9f5d908a62d4654b"
// <auto-generated/>
#pragma warning disable 1591
[assembly: global::Microsoft.AspNetCore.Razor.Hosting.RazorCompiledItemAttribute(typeof(AspNetCore.Views_Inventory__ProductTransaction), @"mvc.1.0.view", @"/Views/Inventory/_ProductTransaction.cshtml")]
[assembly:global::Microsoft.AspNetCore.Mvc.Razor.Compilation.RazorViewAttribute(@"/Views/Inventory/_ProductTransaction.cshtml", typeof(AspNetCore.Views_Inventory__ProductTransaction))]
namespace AspNetCore
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Mvc;
    using Microsoft.AspNetCore.Mvc.Rendering;
    using Microsoft.AspNetCore.Mvc.ViewFeatures;
#line 1 "E:\TFS\POPAGM\AGMPOP_Core\AGMPOP.Web\Views\_ViewImports.cshtml"
using AGMPOP.Web;

#line default
#line hidden
#line 2 "E:\TFS\POPAGM\AGMPOP_Core\AGMPOP.Web\Views\_ViewImports.cshtml"
using AGMPOP.Web.Models;

#line default
#line hidden
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"966f6fee55977bd6e0f14dfa9f5d908a62d4654b", @"/Views/Inventory/_ProductTransaction.cshtml")]
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"c3344144602cec692e91fef16bcf12fc0a4de791", @"/Views/_ViewImports.cshtml")]
    public class Views_Inventory__ProductTransaction : global::Microsoft.AspNetCore.Mvc.Razor.RazorPage<List<AGMPOP.BL.Models.ViewModels.ProductDTO>>
    {
        #pragma warning disable 1998
        public async override global::System.Threading.Tasks.Task ExecuteAsync()
        {
            BeginContext(53, 1294, true);
            WriteLiteral(@"
<div class=""row"">
    <div class=""col-12 text-right my-1 "">



        <button type=""button"" class=""material-tooltip-main  btn   text-center  px-3 waves-effect waves-light mr-0  "" style=""background-color:#080a2e; color:white;"" onclick='ExportInventory()'>
            Export&nbsp;

            <i class=""fal fa-arrow-down fa-align-center "" style=""vertical-align: middle !important; font-size:15px;""></i>
        </button>

    </div>
</div>




<div class=""row"">
    <div class=""col-md-12"">
        <div class=""card card-body"">



            <table id=""dtBasicExample"" class=""table table-responsive-sm table-responsive-md table-striped table-bordered"" cellspacing=""0"" width=""100%"">
                <thead>
                    <tr>
                        <th data-field=""photo"" class=""text-center"">Photo</th>
                        <th data-field=""name"" data-sortable=""true"" class=""w-25 text-center"">Name</th>
                        <th data-field=""quantity"" class=""text-center"">quantity</th");
            WriteLiteral(@">
                        <th data-field=""DepartmentId"" class=""text-center"">Department</th>
                        <th class=""td-actions text-center"" style=""width:300px;"">Actions</th>

                    </tr>
                </thead>
                <tbody>

");
            EndContext();
#line 39 "E:\TFS\POPAGM\AGMPOP_Core\AGMPOP.Web\Views\Inventory\_ProductTransaction.cshtml"
                      
                        if (Model != null)
                        {

                            foreach (var item in Model)
                            {

#line default
#line hidden
            BeginContext(1532, 236, true);
            WriteLiteral("                                <tr>\r\n                                    <td class=\"text-center\">\r\n                                        <div class=\"img-container\">\r\n                                            <img class=\"img-circle\"");
            EndContext();
            BeginWriteAttribute("src", " src=\"", 1768, "\"", 1785, 1);
#line 48 "E:\TFS\POPAGM\AGMPOP_Core\AGMPOP.Web\Views\Inventory\_ProductTransaction.cshtml"
WriteAttributeValue("", 1774, item.Image, 1774, 11, false);

#line default
#line hidden
            EndWriteAttribute();
            BeginContext(1786, 318, true);
            WriteLiteral(@" style=""border-radius:5%;height:40px; width:40px;"" />
                                        </div>
                                    </td>
                                    <td class=""text-center"">
                                        <a class=""btn-link font-weight-bold"" style=""text-decoration:underline""");
            EndContext();
            BeginWriteAttribute("onclick", " onclick=\"", 2104, "\"", 2149, 3);
            WriteAttributeValue("", 2114, "ShowProductDetails(", 2114, 19, true);
#line 52 "E:\TFS\POPAGM\AGMPOP_Core\AGMPOP.Web\Views\Inventory\_ProductTransaction.cshtml"
WriteAttributeValue("", 2133, item.ProductId, 2133, 15, false);

#line default
#line hidden
            WriteAttributeValue("", 2148, ")", 2148, 1, true);
            EndWriteAttribute();
            BeginContext(2150, 1, true);
            WriteLiteral(">");
            EndContext();
            BeginContext(2152, 16, false);
#line 52 "E:\TFS\POPAGM\AGMPOP_Core\AGMPOP.Web\Views\Inventory\_ProductTransaction.cshtml"
                                                                                                                                                        Write(item.ProductName);

#line default
#line hidden
            EndContext();
            BeginContext(2168, 51, true);
            WriteLiteral("</a>\r\n\r\n                                    </td>\r\n");
            EndContext();
#line 55 "E:\TFS\POPAGM\AGMPOP_Core\AGMPOP.Web\Views\Inventory\_ProductTransaction.cshtml"
                                     if (item.ShowUpdateBtns == true)
                                    {

#line default
#line hidden
            BeginContext(2329, 169, true);
            WriteLiteral("                                        <td>\r\n                                            <input type=\"number\" class=\"form-control\" style=\"width:250px; margin-left:10px\"");
            EndContext();
            BeginWriteAttribute("value", " value=\"", 2498, "\"", 2525, 1);
#line 58 "E:\TFS\POPAGM\AGMPOP_Core\AGMPOP.Web\Views\Inventory\_ProductTransaction.cshtml"
WriteAttributeValue("", 2506, item.InventoryQnty, 2506, 19, false);

#line default
#line hidden
            EndWriteAttribute();
            BeginWriteAttribute("id", " id=\"", 2526, "\"", 2546, 1);
#line 58 "E:\TFS\POPAGM\AGMPOP_Core\AGMPOP.Web\Views\Inventory\_ProductTransaction.cshtml"
WriteAttributeValue("", 2531, item.ProductId, 2531, 15, false);

#line default
#line hidden
            EndWriteAttribute();
            BeginWriteAttribute("onclick", " onclick=\"", 2547, "\"", 2592, 3);
            WriteAttributeValue("", 2557, "changeQuantity(", 2557, 15, true);
#line 58 "E:\TFS\POPAGM\AGMPOP_Core\AGMPOP.Web\Views\Inventory\_ProductTransaction.cshtml"
WriteAttributeValue("", 2572, item.InventoryQnty, 2572, 19, false);

#line default
#line hidden
            WriteAttributeValue("", 2591, ")", 2591, 1, true);
            EndWriteAttribute();
            BeginContext(2593, 88, true);
            WriteLiteral(" disabled />\r\n                                            <input id=\"temp\" type=\"hidden\"");
            EndContext();
            BeginWriteAttribute("value", " value=\"", 2681, "\"", 2708, 1);
#line 59 "E:\TFS\POPAGM\AGMPOP_Core\AGMPOP.Web\Views\Inventory\_ProductTransaction.cshtml"
WriteAttributeValue("", 2689, item.InventoryQnty, 2689, 19, false);

#line default
#line hidden
            EndWriteAttribute();
            BeginContext(2709, 52, true);
            WriteLiteral(" />\r\n                                        </td>\r\n");
            EndContext();
#line 61 "E:\TFS\POPAGM\AGMPOP_Core\AGMPOP.Web\Views\Inventory\_ProductTransaction.cshtml"
                                    }
                                    else
                                    {

#line default
#line hidden
            BeginContext(2881, 113, true);
            WriteLiteral("                                        <td class=\"text-center\">\r\n                                            <p>");
            EndContext();
            BeginContext(2995, 18, false);
#line 65 "E:\TFS\POPAGM\AGMPOP_Core\AGMPOP.Web\Views\Inventory\_ProductTransaction.cshtml"
                                          Write(item.InventoryQnty);

#line default
#line hidden
            EndContext();
            BeginContext(3013, 53, true);
            WriteLiteral("</p>\r\n                                        </td>\r\n");
            EndContext();
#line 67 "E:\TFS\POPAGM\AGMPOP_Core\AGMPOP.Web\Views\Inventory\_ProductTransaction.cshtml"
                                    }

#line default
#line hidden
            BeginContext(3105, 107, true);
            WriteLiteral("                                    <td class=\"text-center\">\r\n\r\n                                        <p>");
            EndContext();
            BeginContext(3213, 19, false);
#line 70 "E:\TFS\POPAGM\AGMPOP_Core\AGMPOP.Web\Views\Inventory\_ProductTransaction.cshtml"
                                      Write(item.DepartmentName);

#line default
#line hidden
            EndContext();
            BeginContext(3232, 159, true);
            WriteLiteral("</p>\r\n\r\n                                    </td>\r\n\r\n\r\n                                    <td class=\"text-center\">\r\n                                        <a");
            EndContext();
            BeginWriteAttribute("href", " href=\"", 3391, "\"", 3480, 1);
#line 76 "E:\TFS\POPAGM\AGMPOP_Core\AGMPOP.Web\Views\Inventory\_ProductTransaction.cshtml"
WriteAttributeValue("", 3398, Url.Action("TransactionProductDetails", "Inventory", new { id = item.ProductId }), 3398, 82, false);

#line default
#line hidden
            EndWriteAttribute();
            BeginContext(3481, 210, true);
            WriteLiteral(" target=\"_blank\" class=\"material-tooltip-main btn-warning  btn btn-floating my-0 p-0\" data-toggle=\"tooltip\" title=\"View log\"> <i class=\"fas fa-info-circle \" style=\"font-size:15px; margin-top:-5px;\"></i></a>\r\n\r\n");
            EndContext();
#line 78 "E:\TFS\POPAGM\AGMPOP_Core\AGMPOP.Web\Views\Inventory\_ProductTransaction.cshtml"
                                         if (item.ShowUpdateBtns == true)
                                        {


#line default
#line hidden
            BeginContext(3811, 155, true);
            WriteLiteral("                                            <button class=\"material-tooltip-main btn-primary  btn btn-floating my-0 p-0\" data-toggle=\"tooltip\" title=\"Edit\"");
            EndContext();
            BeginWriteAttribute("id", " id=\"", 3966, "\"", 3997, 1);
#line 81 "E:\TFS\POPAGM\AGMPOP_Core\AGMPOP.Web\Views\Inventory\_ProductTransaction.cshtml"
WriteAttributeValue("", 3971, item.ProductId + "edit", 3971, 26, false);

#line default
#line hidden
            EndWriteAttribute();
            BeginWriteAttribute("onclick", " onclick=\"", 3998, "\"", 4044, 3);
            WriteAttributeValue("", 4008, "javascript:editQunt(", 4008, 20, true);
#line 81 "E:\TFS\POPAGM\AGMPOP_Core\AGMPOP.Web\Views\Inventory\_ProductTransaction.cshtml"
WriteAttributeValue("", 4028, item.ProductId, 4028, 15, false);

#line default
#line hidden
            WriteAttributeValue("", 4043, ")", 4043, 1, true);
            EndWriteAttribute();
            BeginContext(4045, 177, true);
            WriteLiteral(">\r\n                                                <i class=\"fas fa-edit \" style=\"font-size:15px; margin-top:-5px;\"></i>\r\n                                            </button>\r\n");
            EndContext();
            BeginContext(4226, 163, true);
            WriteLiteral("                                            <button class=\"material-tooltip-main btn-danger  btn btn-floating my-0 p-0 d-none\" data-toggle=\"tooltip\" title=\"Cancel\"");
            EndContext();
            BeginWriteAttribute("id", " id=\"", 4389, "\"", 4422, 1);
#line 86 "E:\TFS\POPAGM\AGMPOP_Core\AGMPOP.Web\Views\Inventory\_ProductTransaction.cshtml"
WriteAttributeValue("", 4394, item.ProductId + "cancle", 4394, 28, false);

#line default
#line hidden
            EndWriteAttribute();
            BeginWriteAttribute("onclick", " onclick=\"", 4423, "\"", 4460, 3);
            WriteAttributeValue("", 4433, "cancelQunt(", 4433, 11, true);
#line 86 "E:\TFS\POPAGM\AGMPOP_Core\AGMPOP.Web\Views\Inventory\_ProductTransaction.cshtml"
WriteAttributeValue("", 4444, item.ProductId, 4444, 15, false);

#line default
#line hidden
            WriteAttributeValue("", 4459, ")", 4459, 1, true);
            EndWriteAttribute();
            BeginContext(4461, 185, true);
            WriteLiteral(">\r\n                                                <i class=\"fas fa-times-circle \" style=\"font-size:15px; margin-top:-5px;\"></i>\r\n                                            </button>\r\n");
            EndContext();
            BeginContext(4648, 162, true);
            WriteLiteral("                                            <button class=\"material-tooltip-main btn-success  btn btn-floating my-0 p-0 d-none\" data-toggle=\"tooltip\" title=\"Save\"");
            EndContext();
            BeginWriteAttribute("id", " id=\"", 4810, "\"", 4841, 1);
#line 90 "E:\TFS\POPAGM\AGMPOP_Core\AGMPOP.Web\Views\Inventory\_ProductTransaction.cshtml"
WriteAttributeValue("", 4815, item.ProductId + "save", 4815, 26, false);

#line default
#line hidden
            EndWriteAttribute();
            BeginWriteAttribute("onclick", " onclick=\"", 4842, "\"", 4877, 3);
            WriteAttributeValue("", 4852, "saveQunt(", 4852, 9, true);
#line 90 "E:\TFS\POPAGM\AGMPOP_Core\AGMPOP.Web\Views\Inventory\_ProductTransaction.cshtml"
WriteAttributeValue("", 4861, item.ProductId, 4861, 15, false);

#line default
#line hidden
            WriteAttributeValue("", 4876, ")", 4876, 1, true);
            EndWriteAttribute();
            BeginContext(4878, 177, true);
            WriteLiteral(">\r\n                                                <i class=\"fas fa-save \" style=\"font-size:15px; margin-top:-5px;\"></i>\r\n                                            </button>\r\n");
            EndContext();
#line 93 "E:\TFS\POPAGM\AGMPOP_Core\AGMPOP.Web\Views\Inventory\_ProductTransaction.cshtml"
                                        }

#line default
#line hidden
            BeginContext(5098, 82, true);
            WriteLiteral("                                    </td>\r\n                                </tr>\r\n");
            EndContext();
#line 96 "E:\TFS\POPAGM\AGMPOP_Core\AGMPOP.Web\Views\Inventory\_ProductTransaction.cshtml"
                            }

                        }
                        else
                        {

#line default
#line hidden
            BeginContext(5297, 202, true);
            WriteLiteral("                            <tr>\r\n                                <td>\r\n\r\n                                    data Not Found\r\n                                </td>\r\n\r\n                            </tr>\r\n");
            EndContext();
#line 108 "E:\TFS\POPAGM\AGMPOP_Core\AGMPOP.Web\Views\Inventory\_ProductTransaction.cshtml"
                        }
                    

#line default
#line hidden
            BeginContext(5549, 155, true);
            WriteLiteral("                </tbody>\r\n\r\n            </table>\r\n\r\n\r\n\r\n        </div><!--  end card  -->\r\n\r\n\r\n    </div> <!-- end col-md-12 -->\r\n</div> <!-- end row -->\r\n");
            EndContext();
            BeginContext(5720, 1313, true);
            WriteLiteral(@"<script type=""text/javascript"">
    $(function () {
        $('.material-tooltip-main').tooltip();
    })
    var $table = $('#cycles-table');
    $table.bootstrapTable({
        toolbar: "".toolbar"",
        clickToSelect: true,
        //showRefresh: true,
        search: true,
        //showToggle: true,
        //showColumns: true,
        pagination: true,
        searchAlign: 'left',
        pageSize: 8,
        clickToSelect: false,
        pageList: [8, 10, 25, 50, 100],

        formatShowingRows: function (pageFrom, pageTo, totalRows) {
            //do nothing here, we don't want to show the text ""showing x of y from...""
        },
        formatRecordsPerPage: function (pageNumber) {
            return pageNumber + "" rows visible"";
        },
        icons: {
            columns: 'fa-columns'
        }
    });

    $(document).ready(function () {
        $('#dtBasicExample').DataTable();

        //activate the tooltips after the data table is initialized
        $(");
            WriteLiteral(@"'[rel=""tooltip""]').tooltip();

        $(window).resize(function () {
            $table.bootstrapTable('resetView');
        });
    });

</script>

<script>
    function TransactionProduct(id) {

        window.location.href = ""Inventory/TransactionProductDetails/"" + id;

");
            EndContext();
            BeginContext(7348, 11, true);
            WriteLiteral("\r\n    }\r\n\r\n");
            EndContext();
            BeginContext(7396, 317, true);
            WriteLiteral(@"    function editQunt(id) {

        $(""#"" + id).prop('disabled', false);
        $(""#"" + id + ""save"").toggleClass('d-inline');
        $(""#"" + id + ""edit"").toggleClass('d-none');
        $(""#"" + id + ""cancle"").toggleClass('d-inline');
        $(""#msg"").addClass('d-none');

        changeQunt(id);
    }

");
            EndContext();
            BeginContext(7751, 381, true);
            WriteLiteral(@"    function cancelQunt(id) {
        $(""#"" + id).val($(""#temp"").val());
        console.log($(""#temp"").val());
        $(""#"" + id + ""save"").toggleClass('d-inline');
        $(""#"" + id + ""edit"").toggleClass('d-none');
        $(""#"" + id + ""cancle"").toggleClass('d-inline');

        $(""#msg"").addClass('d-none');

        $(""#"" + id).prop('disabled', true);


    }

");
            EndContext();
            BeginContext(8153, 116, true);
            WriteLiteral("    function changeQunt(id) {\r\n        var change = $(\"#\" + id).val();\r\n        $(\"#temp\").val(change);\r\n\r\n    }\r\n\r\n");
            EndContext();
            BeginContext(8296, 2706, true);
            WriteLiteral(@"    function saveQunt(id) {

        if (!$(""#"" + id).val()) {

            $(""#msg"").css('display', 'inline-block');

        }
        else {
            // check two values temp vs actual
            if ($(""#"" + id).val() != $(""#temp"").val()) {
                if ($(""#"" + id).val() != null) {
                    var _parameters = { Id: id, Qunt: $(""#"" + id).val() }
                }
                else {
                    var _parameters = { Id: id }

                }
                if ($(""#temp"").val() < $(""#"" + id).val()) {
                    $.ajax({
                        url: ""/inventory/EditQuantity"",
                        type: ""GET"",
                        data: _parameters,
                        success: function (data) {
                            //  window.location.href = ""/Department/Index"";
                            if (data) {
                                if (data.success) {
                                    swal.fire({
                         ");
            WriteLiteral(@"               text: 'Your data has been updated',
                                        icon: 'success',
                                       
                                    })

                                }
                                else {
                                    swal.fire({
                                        text: data.message,
                                        icon: 'error',

                                    })

                                }

                            }


                            $(""#"" + id + ""save"").toggleClass('d-inline');
                            $(""#"" + id + ""edit"").toggleClass('d-none');
                            $(""#"" + id + ""cancle"").toggleClass('d-inline');
                            $(""#"" + id).prop('disabled', true);


                        }
                    });
                }
                else {
                    var temp = $(""#temp"").val();
                    $(""#"" + id).val");
            WriteLiteral(@"(temp);

                }
            }
            else {
                swal.fire({
                    text: 'Nothing has changed !!',
                    icon: 'info',
                    buttonsStyling: false
                });
                $(""#"" + id + ""save"").toggleClass('d-inline');
                $(""#"" + id + ""edit"").toggleClass('d-none');
                $(""#"" + id + ""cancle"").toggleClass('d-inline');
                $(""#"" + id).prop('disabled', true);



            }
        }
    }



</script>


<script>


    async function ExportInventory() {

        var now = moment().format();
         fetch('");
            EndContext();
            BeginContext(11003, 29, false);
#line 306 "E:\TFS\POPAGM\AGMPOP_Core\AGMPOP.Web\Views\Inventory\_ProductTransaction.cshtml"
           Write(Url.Action("ExportInventory"));

#line default
#line hidden
            EndContext();
            BeginContext(11032, 1146, true);
            WriteLiteral(@"', {
             method: 'get',

            headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
        }).then(response => {
            return response.blob();
        }).then(blob => {
            if (!blob) {
                swal.fire({
                    icon: 'error',
                    text: 'No file to download',
                });
                return;
            } else if (!blob.size){
                swal.fire({
                    icon: 'error',
                    text: 'You don\'t have permission',
                });
                return;
            }
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.style.display = 'none';
            a.href = url;
            a.download = `Inventory_${now}.xlsx`;
            document.body.appendChild(a);
            a.click();
            window.URL.revokeObjectURL(url);
            }).catch(err => {
                swal.fire({
     ");
            WriteLiteral("           icon: \'error\',\r\n                text: \'An error occured\',\r\n            });\r\n        });\r\n    }\r\n</script>\r\n\r\n\r\n");
            EndContext();
        }
        #pragma warning restore 1998
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.IModelExpressionProvider ModelExpressionProvider { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IUrlHelper Url { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IViewComponentHelper Component { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IJsonHelper Json { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IHtmlHelper<List<AGMPOP.BL.Models.ViewModels.ProductDTO>> Html { get; private set; }
    }
}
#pragma warning restore 1591
