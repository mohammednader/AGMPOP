@model List<AGMPOP.BL.Models.ViewModels.ProductDTO>


<div class="row">
    <div class="col-12 text-right mb-2">


        <button type="button" class="material-tooltip-main mr-0 btn btn-default   text-center mt-0 mb-0 px-3 waves-effect waves-light " onclick="location.href='@Url.Action("ImportProduct", "Product")'">
            Import&nbsp; <i class="fal fa-arrow-up fa-align-center " style="vertical-align: middle !important; font-size:20px;"> </i>
        </button>
        @if (Model?.Count > 0)
        {
        <button type="button" class="material-tooltip-main  btn mr-0  text-center mb-0 mt-0 px-3 waves-effect waves-light" style="background-color:#080a2e; color:white;" onclick="ExportProdcut()">
            Export&nbsp; <i class="fal fa-arrow-down fa-align-center " style="vertical-align: middle !important; font-size:20px;"> </i>
        </button>
        }
    </div>

</div>



<div class="row">
    <div class="col-md-12">
        <div class="card card-body">



            <table id="dtBasicExample" class="table   table-responsive-sm   table-striped table-bordered" cellspacing="0" width="100%">
                <thead>
                    <tr>
                        <th data-field="photo" class="text-center">Photo</th>
                        <th data-field="name" data-sortable="true" class="w-25 text-center">Name</th>
                        <th data-field="code" class="text-center">Code</th>
                        <th data-field="DepartmentId" class="text-center">Department</th>
                        @*<th data-field="TypeId" class="text-center">Type</th>*@
                        <th class="td-actions text-center" style="width:300px;">Actions</th>
                    </tr>
                </thead>
                <tbody>

                    @{
                        if (Model ?.Count>0)
                        {

                            foreach (var item in Model)
                            {
                                <tr>
                                    <td class="text-center">
                                        <div class="img-container">
                                            <img class="img-circle" src="@item.Image" style="border-radius:5%;height:40px; width:40px;" />
                                        </div>
                                    </td>
                                    <td class="text-center">
                                        <a class="btn-link font-weight-bold" style="text-decoration:underline" onclick="ShowProductDetails(@item.ProductId)">@item.ProductName</a>

                                    </td>
                                    <td class="text-center">
                                        @item.Code
                                    </td>
                                    <td class="text-center">
                                        @item.DepartmentName


                                    </td>

                                    @*<td class="text-center">
                                        @if (item.TypeId == 1)
                                        {
                                            <p> BBO </p>


                                        }
                                        @if (item.TypeId == 2)
                                        {
                                            <p>  Product </p>

                                        }
                                    </td>*@
                                    <td class="text-center">


                                        <button class="material-tooltip-main btn-primary  btn btn-floating my-0 p-0" data-toggle="tooltip" title="Edit" onclick="Edit(@item.ProductId)">
                                            <i class="fas fa-edit " style="font-size:15px; margin-top:-5px;"></i>
                                        </button>
                                        @if (item.IsActive)
                                        {
                                            <button class="material-tooltip-main btn btn-success btn-floating my-0 p-0 btnDectivation" data-toggle="tooltip" title="Deactivate" value="@item.ProductId">
                                                <i class="fad fa-user-check" style="font-size:15px; margin-top:-5px;"></i>
                                            </button>


                                        }
                                        else
                                        {

                                            <button class="material-tooltip-main btn btn-danger btn-floating my-0 p-0 btnActivation" data-toggle="tooltip" title="activate" value="@item.ProductId">
                                                <i class="fad fa-user-times " style="font-size:15px; margin-top:-5px;"></i>
                                            </button>

                                        }
                                    </td>
                                </tr>
                            }

                        }
                        else
                        {
                            <tr>
                                <td colspan="6">
                                    data Not Found
                                </td>
                            </tr>
                        }
                    }
                </tbody>

            </table>



        </div><!--  end card  -->


    </div> <!-- end col-md-12 -->
</div> <!-- end row -->
@*pagination*@
<script type="text/javascript">
    $(function () {
        $('.material-tooltip-main').tooltip();
    })
    var $table = $('#cycles-table');
    $table.bootstrapTable({
        toolbar: ".toolbar",
        clickToSelect: true,
        //showRefresh: true,
        search: true,
        //showToggle: true,
        //showColumns: true,
        pagination: true,
        searchAlign: 'left',
        pageSize: 8,
        clickToSelect: false,
        pageList: [8, 10, 25, 50, 100],

        formatShowingRows: function (pageFrom, pageTo, totalRows) {
            //do nothing here, we don't want to show the text "showing x of y from..."
        },
        formatRecordsPerPage: function (pageNumber) {
            return pageNumber + " rows visible";
        },
        icons: {
            columns: 'fa-columns'
        }
    });

    $(document).ready(function () {
        $('#dtBasicExample').DataTable();

        //activate the tooltips after the data table is initialized
        $('[rel="tooltip"]').tooltip();

        $(window).resize(function () {
            $table.bootstrapTable('resetView');
        });
    });

</script>

@*Active DeActive*@

<script type="text/javascript">
        $(function () {
            $(".btnActivation").click(function (e) {
                var ProductId = $(this).val();

                Swal.fire({
                     text: "Are you sure you want to activate this product?",
                    icon: 'question',
                    showCancelButton: true,
                    confirmButtonColor: '#4285f4',
                    cancelButtonColor: '#a1a1a1',
                    confirmButtonText: 'Ok' 
                    
                }).then((result) => {
                    if (result.value) {
                        $.ajax({
                            url: '@Url.Action("activate", "Product")',
                            data: { ProductId },
                            type: "Post",
                            success: function (data) {
                            },

                        });

                        Swal.fire(
                            'Activate!',
                            'Your Product has been Activate.',
                            'success',
                        ).then(
                            function () {
                                loadProduct();

                            }
                        );

                    }
                })

            })
        })

        $(function () {
            $(".btnDectivation").click(function (e) {
                var ProductId = $(this).val();
                Swal.fire({
                    text: "Are you sure you want to deactivate this product?",
                    icon: 'question',                    
                    showCancelButton: true,
                    confirmButtonColor: '#4285f4',
                    cancelButtonColor: '#a1a1a1',
                    confirmButtonText: 'Ok'
                }).then((result) => {
                    if (result.value) {
                        $.ajax({
                            url: '@Url.Action("Deactivate", "Product")',
                            data: { ProductId },
                            type: "Post",
                            success: function (data) {
                            },
                        });
                        Swal.fire(
                            'Deactivate!',
                            'Your Product has been Deactivate.',
                            'success',
                        ).then(
                            function () {
                                loadProduct();

                            }
                        );

                    }

                })

            })
        })

</script>

